<h4 class="mb-4 text-primary">
    <p class="text-secondary mb-4 fw-bold">Cálculo de riesgo según norma IEC 62305-2, UNE 21186, NFC 17102, NP 4426 y equivalentes.</p>
</h4>

<div class="row">
    <div class="col-md-6">
        <h5 class="mb-4 text-primary">DATOS DEL PROYECTO</h5>
        <div class="form-group mb-2 row align-items-center">
            <label for="projectName" class="col-sm-5 col-form-label fw-regular">Nombre Proyecto</label>
            <div class="col-sm-7">
                <input type="text" class="form-control" id="projectName" value="">
            </div>
        </div>
        <div class="form-group mb-2 row align-items-center">
            <label for="projectCountry" class="col-sm-5 col-form-label fw-regular">País</label>
            <div class="col-sm-7">
                <select class="form-select" id="projectCountry" onchange="toggleSpainSections()">
                    <option selected>--Por favor, elige una opción--</option>
                    <option value="ES">ESPAÑA</option>
                    <option value="PT">PORTUGAL</option>
                    <option value="FR">FRANCIA</option>
                    <option value="MA">MARRUECOS</option>
                </select>
            </div>
        </div>
        <div class="form-group mb-2 row align-items-center">
            <label for="projectAddress" class="col-sm-5 col-form-label fw-regular">Dirección</label>
            <div class="col-sm-7">
                <input type="text" class="form-control" id="projectAddress" value=" ">
            </div>
        </div>
        <div class="form-group mb-2 row align-items-center">
            <label for="projectTown" class="col-sm-5 col-form-label fw-regular">Población</label>
            <div class="col-sm-7">
                <input type="text" class="form-control" id="projectTown" value="">
            </div>
        </div>
        <div class="form-group mb-2 row align-items-center">
            <label for="projectProvince" class="col-sm-5 col-form-label fw-regular">Provincia</label>
            <div class="col-sm-7">
                <input type="text" class="form-control" id="projectProvince" value="">
            </div>
        </div>
        <div class="form-group mb-2 row align-items-center">
            <label for="buildingsToProtect" class="col-sm-5 col-form-label fw-regular">Edificios a proteger</label>
            <div class="col-sm-7">
                <input type="number" class="form-control" id="buildingsToProtect" value="1" readonly>
            </div>
        </div>

        <div class="form-group mt-3 mb-3">
            <p class="form-label fw-regular">Casos particulares</p>
            <div class="border p-3 rounded">

                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="newConstruction" checked>
                    <label class="form-check-label" for="newConstruction">
                        Obra nueva
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="workplace">
                    <label class="form-check-label" for="workplace">
                        Se utiliza como centro de trabajo
                    </label>
                </div>

                <div id="onlySpainChecks">
                    <p class="text-danger small mt-2">Estos dos apartados inferiores solo para ESPAÑA.</p>

                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="protectedArea">
                        <label class="form-check-label" for="protectedArea">
                            Es una pirotécnia
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="touristCamp">
                        <label class="form-check-label" for="touristCamp">
                            Es un campamento de turismo
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group mb-3" id="onlySpainNormative">
            <p class="form-label fw-regular">Normativa para el cálculo
                <span class="text-danger small fw-normal ms-2">(Solo para proyectos en ESPAÑA)</span>
            </p>
            <div class="border p-3 rounded">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="calculationNormative" id="normativeLightning"
                        value="lightning" checked>
                    <label class="form-check-label" for="normativeLightning">
                        Según normas de protección contra el rayo
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="calculationNormative" id="normativeCTE"
                        value="cte">
                    <label class="form-check-label" for="normativeCTE">
                        Según CTE
                    </label>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <h5 class="mb-4 text-primary">DATOS PROYECTISTA 
            <span class="text-danger small fw-normal ms-2">(Usuario dado de alta o correo verificado)</span>
        </h5>
        <div class="form-group mb-2 row align-items-center">
            <label for="designerCompany" class="col-sm-5 col-form-label fw-regular">Empresa</label>
            <div class="col-sm-7">
                <input type="text" class="form-control" id="designerCompany" value="EMPRESA PROYECTISTA">
            </div>
        </div>
        <div class="form-group mb-2 row align-items-center">
            <label for="designerCIF" class="col-sm-5 col-form-label fw-regular">CIF</label>
            <div class="col-sm-7">
                <input type="text" class="form-control" id="designerCIF" value="">
            </div>
        </div>        
        <div class="form-group mb-2 row align-items-center">
            <label for="designerAddress" class="col-sm-5 col-form-label fw-regular">Dirección</label>
            <div class="col-sm-7">
                <input type="text" class="form-control" id="designerAddress" value="DIRECCION DEL PROYECTISTA">
            </div>
        </div>
        <div class="form-group mb-2 row align-items-center">
            <label for="designerTown" class="col-sm-5 col-form-label fw-regular">Población</label>
            <div class="col-sm-7">
                <input type="text" class="form-control" id="designerTown" value="POBLACION PROYECTISTA">
            </div>
        </div>
        <div class="form-group mb-2 row align-items-center">
            <label for="designerPostalCode" class="col-sm-5 col-form-label fw-regular">Código postal</label>
            <div class="col-sm-7">
                <input type="text" class="form-control" id="designerPostalCode" value="">
            </div>
        </div>
        <div class="form-group mb-2 row align-items-center">
            <label for="designerProvince" class="col-sm-5 col-form-label fw-regular">Provincia</label>
            <div class="col-sm-7">
                <input type="text" class="form-control" id="designerProvince" value="PROVINCIA PROYECTISTA">
            </div>
        </div>
        <div class="form-group mb-2 row align-items-center">
            <label for="designerCountry" class="col-sm-5 col-form-label fw-regular">País</label>
            <div class="col-sm-7">
                <input type="text" class="form-control" id="designerCountry" value="ES">
            </div>
        </div>

        <div class="form-group mb-2 row align-items-center">
            <label for="designerPhone" class="col-sm-5 col-form-label fw-regular">Teléfono</label>
            <div class="col-sm-7">
                <input type="tel" class="form-control" id="designerPhone" value="">
            </div>
        </div>
        <div class="form-group mb-2 row align-items-center">
            <label for="designerContact" class="col-sm-5 col-form-label fw-regular">Contacto</label>
            <div class="col-sm-7">
                <input type="text" class="form-control" id="designerContact" value="CONTACTO PROYECTISTA">
            </div>
        </div>
        <div class="form-group mb-2 row align-items-center">
            <label for="designerEmail" class="col-sm-5 col-form-label fw-regular">E-mail</label>
            <div class="col-sm-7">
                <input type="email" class="form-control" id="designerEmail" value="EMAIL@PROYECTISTA.COM">
            </div>
        </div>
        <div class="form-group mb-2 row align-items-center">
            <label for="designerMb" class="col-sm-5 col-form-label fw-regular">Móvil</label>
            <div class="col-sm-7">
                <input type="tel" class="form-control" id="designerMb" value="">
            </div>
        </div>
    </div>
</div>

<div class="d-flex justify-content-between mt-4">
    <button class="btn btn-orange" disabled>Salir</button>
    <button class="btn btn-orange" onclick="nextStep()">Siguiente</button>
</div>

<script>
function toggleSpainSections() {
    const country = document.getElementById('projectCountry').value;
    const isSpain = country === 'ES';

    // Mostrar u ocultar los checkboxes de pirotécnia y campamento
    const onlySpainChecks = document.getElementById('onlySpainChecks');
    if (onlySpainChecks) {
        onlySpainChecks.style.display = isSpain ? 'block' : 'none';
    }

    // Mostrar u ocultar la sección de normativa
    const onlySpainNormative = document.getElementById('onlySpainNormative');
    if (onlySpainNormative) {
        onlySpainNormative.style.display = isSpain ? 'block' : 'none';
    }
}

// ✅ CORRECCIÓN: Llamar a la función directamente al cargarse el contenido dinámicamente.
toggleSpainSections();
</script>